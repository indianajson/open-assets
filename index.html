<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>openAssets</title>
  <link rel="stylesheet" href="style.css">

  <!-- jQuery -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <!-- JSZip + FileSaver for ZIP download -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.5.0/jszip.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
  <!-- Panzoom for image pan/zoom -->
  <script src='https://unpkg.com/@panzoom/panzoom@4.6.0/dist/panzoom.min.js'></script>
  <!-- JSON for file list -->
  <script src='tiles.js'></script>
  <script src='backgrounds.js'></script>
  <script src='music.js'></script>
  <script src='npcs.js'></script>
  <script src='scripts.js'></script>
  <script src='tools.js'></script>

</head>
<body>
  <div class="window">
    <div class="title-bar">
      <div class="title-bar-text">&nbsp; openAssets for ONB </div>
      <div class="title-bar-text" id="feedback-btn" style="cursor:pointer; padding-top:2px; vertical-align:middle; float:right; font-size:23px; font-weight:bold; color:#fff;"><span style="text-decoration:underline;">Submit Feedback / Removal Requests ▸</span> &nbsp;</div>
    </div>

    <!-- Tabs -->
    <div class="tabs">
      <div class="tab active" data-tab="tiles">Tiles/Objects</div>
      <div class="tab" data-tab="backgrounds">Backgrounds</div>
      <div class="tab" data-tab="npcs">NPCs</div>
      <div class="tab" data-tab="music">Music</div>
      <div class="tab" data-tab="scripts">Scripts</div>
      <div class="tab" data-tab="tools">Tools/Info</div>
    </div>

    <!-- Search bar -->
    <div class="search-bar">
      <div class="tab-menu-mobile">
        <button id="tab-menu-button">Tab Menu ▾</button>
        <div id="tab-menu-list" class="tab-menu-list">
          <div class="tab-menu-item" data-tab="tiles">Tiles/Objects</div>
          <div class="tab-menu-item" data-tab="backgrounds">Backgrounds</div>
          <div class="tab-menu-item" data-tab="npcs">NPCs</div>
          <div class="tab-menu-item" data-tab="music">Music</div>
          <div class="tab-menu-item" data-tab="scripts">Scripts</div>
          <div class="tab-menu-item" data-tab="tools">Tools/Info</div>
        </div>
      </div>
      <input type="text" id="search-input" placeholder="Search by name...">
    </div>

    <div class="menu-bar">
      <div class="filter" data-filter="game">
        <label>Game ▼</label>
        <div class="dropdown"></div>
      </div>
      <div class="filter" data-filter="type">
        <label>Type ▼</label>
        <div class="dropdown">
          <div><input type="radio" name="type" value="both" id="type-both" checked><label for="type-both"> Both</label></div>
          <div><input type="radio" name="type" value="tile" id="type-tiles"><label for="type-tiles"> Tiles</label></div>
          <div><input type="radio" name="type" value="object" id="type-objects"><label for="type-objects"> Objects</label></div>
        </div>
      </div>
      <div class="filter" data-filter="author">
        <label>Author ▼</label>
        <div class="dropdown"></div>
      </div>
      <div class="filter hidden" data-filter="tooltype">
        <label>Type ▼</label>
        <div class="dropdown"></div>
      </div>

      <button id="clear-filters" disabled>Clear Filters</button>
      <button id="download-selected" disabled>Download Selected</button>
    </div>

    <div class="content">
      <!-- Tiles/Objects Tab -->
      <div class="tab-content active" id="tiles-content">
        <div class="sidebar">
          <table class="file-list">
            <thead>
              <tr><th></th><th class="sortable" data-sort="name">Name</th><th class="sortable" data-sort="game">Game</th><th class="sortable" data-sort="author">Author</th></tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>

        <div class="preview-panel">
          <div class="preview-window">
            <div class="preview-animated"></div>
            <img id="preview-image" src="">
          </div>
          <div class="details">
            <p><strong>Author: </strong> <span id="detail-author">—</span></p>
            <p><strong>Game: </strong> <span id="detail-game">—</span></p>
            <button id="download-single" disabled>Download This Set</button>
          </div>
        </div>
      </div>

      <!-- Backgrounds Tab -->
      <div class="tab-content" id="backgrounds-content">
        <div class="sidebar">
          <table class="file-list">
            <thead>
              <tr><th></th><th class="sortable" data-sort="name">Name</th><th class="sortable" data-sort="game">Game</th><th class="sortable" data-sort="author">Author</th></tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>

        <div class="preview-panel">
          <div class="preview-window">
            <div id="preview-image-bg"></div>
          
          <div class="details">
            <p><strong>Disclaimer: </strong> The background previewer's movement speed does not 100% match in-game.</p>
            <button style="float:right;" id="download-single-bg" disabled>Download This Set</button>

            <p><strong>Author: </strong> <span id="detail-author-bg">—</span></p>
            <p><strong>Game: </strong> <span id="detail-game-bg">—</span></p>
            <p><strong>Background Vel X: </strong> <span id="detail-velx-bg">—</span></p>
            <p><strong>Background Vel Y: </strong> <span id="detail-vely-bg">—</span></p>
            
          </div>
        </div>
      </div>
    </div>
      
      <!-- NPCs Tab -->
      <div class="tab-content" id="npcs-content">
        <div class="sidebar">
          <table class="file-list">
            <thead>
              <tr><th></th><th class="sortable" data-sort="name">Name</th><th class="sortable" data-sort="game">Game</th><th class="sortable" data-sort="author">Author</th></tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>

        <div class="preview-panel">
          <div class="preview-window">
            <div id="preview-image-npc"></div>
          </div>
          <div class="details">
            <button style="float:right;" id="download-single-npc" disabled>Download This Set</button>
            <p><strong>Author: </strong> <span id="detail-author-npc">—</span></p>
            <p><strong>Game: </strong> <span id="detail-game-npc">—</span></p>
          </div>
        </div>
      </div>

      <!-- Music Tab -->
      <div class="tab-content" id="music-content">
        <div class="sidebar">
          <table class="file-list">
            <thead>
              <tr><th></th><th>Play</th>
                <th class="sortable" data-sort="name">Place</th>
                <th class="sortable" data-sort="ostname">Song Name</th>
                <th class="sortable" data-sort="game">Game</th>
                <th class="sortable" data-sort="author">Contributor</th></tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>

  <div class="preview-panel">
    <div class="music-preview-container">
      <div class="music-preview-content">
        <div class="disc-preview" style="text-align:center;">
          <img id="disc-image" src="" class="spinning" style="width:180px; height:180px;">
        </div>
        <div class="music-preview-header">
          <div class="music-title-info">
            <p><span id="detail-ostname-music">—</span></p>
            <p><span id="detail-title-music" style="margin-top:-5px; margin-bottom:-5px;font-size:20px;">—</span></p>
          </div>
          <div id="game-image-container" class="game-image-slideshow"></div>
        </div>
      
      <div class="audio-player">
        <div class="audio-controls">
          <button style="font-size:20px;" id="play-btn">&nbsp;▶</button>
          <input type="range" id="audio-timeline" class="audio-timeline" value="0" min="0" max="100">
          <span id="current-time">0:00</span> / <span id="duration">0:00</span>
        </div>
        <div class="audio-extra-controls">
          <button id="toggleLoop" style="font-size:15px;">Enable Looping</button>
          <div class="volume-control">
            <span style="font-size:15px;">Vol:</span>
            <input type="range" id="volume-slider" min="0" max="100" value="50" style="width:80px;">
          </div>
        </div>
        <audio id="audio-player"></audio>
      </div>
        <div class="details">
          <button id="download-single-music" style="float:right;" disabled>Download This Track</button>
          <!--<p><strong>curTime: </strong> <span id="detail-curtime-music">—</span></p>-->
          <p><strong>Loop Start (ms): </strong> <span id="detail-loopstart-music">—</span></p>
          <p><strong>Loop End (ms): </strong> <span id="detail-loopend-music">—</span></p>
          <p><strong>Game: </strong> <span id="detail-game-music">—</span></p>
          <p><strong>Composer(s): </strong> <span id="detail-composer-music">—</span></p>
          <p><strong>Places Used: </strong> <span id="detail-places-music">—</span></p>
          <p><strong>Contributor(s): </strong> <span id="detail-author-music">—</span></p>
        </div>
        </div>
      </div>
    </div>
  </div>
      
      <!-- Scripts Tab -->
<div class="tab-content" id="scripts-content">
  <div class="sidebar">
    <table class="file-list">
      <thead>
        <tr><th class="sortable" data-sort="name">Name</th><th class="sortable" data-sort="scripttype">Type</th><th class="sortable" data-sort="author">Author</th></tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>
  
  <div class="preview-panel">
    <div class="preview-scrollable">
      <div style="height:100%; overflow:auto;">
        <div id="script-details" class="details"></div>
      </div>
    </div>
  </div>
</div>

<!-- Tools Tab -->
<div class="tab-content" id="tools-content">
  <div class="sidebar">
    <table class="file-list">
      <thead>
        <tr><th class="sortable" data-sort="name">Name</th>
          <th class="sortable" data-sort="tooltype">Type</th>
          <th class="sortable" data-sort="author">Author</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>
  
  <div class="preview-panel">
    <div class="preview-scrollable">
      <div style="height:100%; overflow:auto;">
        <div id="tool-details" class="details"></div>
      </div>
    </div>
  </div>
</div>

  <script src="script.js"></script>
<!-- dimmed overlay -->
<div id="modal-overlay"></div>

<!-- feedback modal window -->
<div id="feedback-modal">
  <div class="modal-title-bar" style="padding:5px;">
    <div class="title-bar-text">&nbsp; Getting Help</div>
    <div class="close-btn" style="font-size:30px;">✕</div>
  </div>
  <div class="modal-content" style="font-size:23px;">
    <p><b>Feedback -</b> Please contact @indianajson on the ONB Discord if you have suggestions on how to improve this tool.<br><br>
    <b>Submissions</b> - To add your ONB assets to the site use the link below and select "Add asset".<br><br>
  <b>Content Removals</b> - If one of your assets ended up here without your permission my sincerest apologies. Either use the link below and select "Remove asset" or DM @indianajson on Discord.<br><br>
<b>Missing Credit</b> - To have your name added as author of an asset use the link below and select "Update author".</p>

    
    <div style="margin-top:8px; text-align:right;">
      <button style="padding:4px 8px; font-size:20px; border:2px outset #FFF; background:#C0C0C0; font-family:'pixel';"><a href="https://github.com/indianajson/open-assets/issues/new/choose" target="_blank" style="text-decoration:none; color:#000;">Start a Request</a></button>
    </div>
  </div>
</div>

</body>
</html>
